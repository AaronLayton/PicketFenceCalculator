
<template id="fenceShadow">
    <style>
        :host {
            width: 50vw;
            height: 100%;
            min-height: 150px;
            text-align: center;
            margin: -16vh auto 0;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .post{
            height: 110%;
            width: 30px;
            background: #848484;
            box-shadow: inset -1px 1px 1px rgba(0, 0, 0, .2);
            border-top-left-radius: 2px;
            border-top-right-radius: 2px;
            position: absolute;
            bottom: 0;
            left: -30px;
        }
        .post.post--right{
            left: auto;
            right: -30px;
        }
        .baton{
            width: 100%;
            height: 15px;
            background: #a7845c url(/img/fence_texture-horizontal.svg) center no-repeat;
            background-size: cover;
            position: absolute;
            top: 20%;
            left: 0;
        }
        .baton.baton--bottom{
            top: auto;
            bottom: 20%;
        }
    </style>
    <div class="post"></div>
    <div class="post post--right"></div>
    <div class="baton"></div>
    <div class="baton baton--bottom"></div>
    <div>
        <content></content>
    </div>
</template>

<script>
    // How do I fererence this in the Class?
    var test = document.currentScript.ownerDocument

    'use strict';

    class VTFence extends HTMLElement {

        createdCallback() { 
            let template = test.querySelector('#fenceShadow');
            let clonedTemplate = test.importNode(template.content, true);

            let root = this.createShadowRoot();
            root.appendChild(clonedTemplate);
        }

        attachedCallback() {
            
        }

        detachedCallback() {

        }

        update() {
            console.log(this.querySelectorAll('vt-picket').length);
        }
        
        _getAllPickets() {
            return this.containerElm.querySelectorAll('vt-picket');
        }
        
        _createPicket(){
            const newPicket = document.createElement('vt-picket');            
            this.containerElm.appendChild(newPicket);
        }

        
    }

    document.registerElement('vt-fence', VTFence);
</script>